- name: Create Registry Certificate directory
  file:
    state: directory
    path: "{{ registry_certs_dir }}"
    mode: 0755
    owner: root
    group: root
  when:
    - registry_certs_dir is defined and registry_certs_dir | length > 0 

- name: Create Registry Data  directory
  file:
    state: directory
    path: "{{ registry_data_dir }}"
    mode: 0755
    owner: root
    group: root
  when:
    - registry_data_dir is defined and registry_data_dir | length > 0 

- name: Create Registry Auth directory
  file:
    state: directory
    path: "{{ registry_auth_dir }}"
    mode: 0755
    owner: root
    group: root
  when:
    - registry_auth_dir is defined and registry_auth_dir | length > 0 

- name: Copy certifcate to directory created above
  copy:
    remote_src: yes
    src: "{{ registry_certfile }}"
    dest: "{{ registry_certs_dir }}"
  when: 
    - not generate_selfsigned_registry_certfiles is defined or not generate_selfsigned_registry_certfiles | bool 
    - registry_certfile is defined and registry_certfile | length > 0
